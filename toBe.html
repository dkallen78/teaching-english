<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      To Be
    </title>
    <!--
    <link rel="stylesheet" href="stylesheet.css">
    <script src="script.js">
    </script>
    -->
    <style>

      :root {
        --cell-borders: 2px;
        --buttons-color: hsl(120, 30%, 80%);
        --buttons-highlight: hsl(120, 70%, 80%);
      }

      body {
        padding-top: 10rem;
        color: hsl(120, 20%, 20%);
        background-color: hsl(120, 50%, 15%);
        font-size: 1.6rem;
      }

      .gridBox {
        display: grid;
        grid-gap: 1rem;
        grid-template-columns: auto auto;
        justify-content: space-evenly;
        margin: auto;
        padding: 1rem;
        width: 60vw;
        background-color: hsl(120, 10%, 95%);
        border-radius: .3rem;
      }

      header {
        display: table;
        margin: auto;
        margin-bottom: 1rem;
        grid-column: 1 / 3;
        padding: .3rem .5rem;
        background-color: hsl(300, 5%, 90%);
        border-radius: .3rem;
        font-size: 2rem;
        box-shadow: inset .1rem .1rem .2rem hsl(300, 5%, 80%),
                    inset -.1rem -.1rem .2rem hsl(300, 5%, 100%);
      }

      table {
        width: 28vw;
        background-color: hsl(300, 20%, 90%);
        border-radius: .3rem;
        box-shadow: .3rem .3rem .3rem hsl(120, 10%, 75%);
      }

      th {
        border-width: 0 0 2px 0;
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      td {
        width: 50%;
        padding: .3rem;
        border: 1px solid black;
      }

      tr td:first-child {
        text-align: right;
      }

      tr:nth-child(2) td:first-child {
        border-width: 0 var(--cell-borders) var(--cell-borders) 0;
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      tr:nth-child(2) td:last-child {
        border-width: 0 0 var(--cell-borders) var(--cell-borders);
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      tr:nth-child(3) td:first-child {
        border-width: var(--cell-borders) var(--cell-borders) var(--cell-borders) 0;
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      tr:nth-child(3) td:last-child {
        border-width: var(--cell-borders) 0 var(--cell-borders) var(--cell-borders);
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      tr:last-child td:first-child {
        border-width: var(--cell-borders) var(--cell-borders) 0 0;
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      tr:last-child td:last-child {
        border-width: var(--cell-borders) 0 0 var(--cell-borders);
        border-style: solid;
        border-color: hsl(120, 100%, 25%);
      }

      #sentenceButton {
        display: table;
        margin: auto;
        grid-column: 1 / 3;
        border-radius: .3rem;
        font-size: 1.3rem;
        color: hsl(300, 50%, 20%);
        background-color: var(--buttons-color);
        transition: all 300ms;
      }

      #sentenceButton:hover {
        background-color: var(--buttons-highlight);
      }

      #displayWindow {
        grid-column: 1 / 3;
        height: 2rem;
        text-align: center;
      }

      #responseWindow {
        grid-column: 1 / 3;
        height: 2rem;
        text-align: center;
      }

      #sentenceSpan, #responseSpan {
        padding: .3rem .5rem;
        background-color: hsl(300, 5%, 90%);
        border-radius: .3rem;
        box-shadow: inset .1rem .1rem .2rem hsl(300, 5%, 80%),
                    inset -.1rem -.1rem .2rem hsl(300, 5%, 100%);
      }

      .wrong {
        background-color: hsl(300, 100%, 85%) !important;
      }

      .correct {
        background-color: hsl(120, 100%, 85%) !important;
      }

      #answerBox {
        display: inline-block;
      }

      #answerBox div {
        display: inline-block;
        padding: 0 .3rem;
        background-color: var(--buttons-color);
        border-radius: .3rem;
        box-shadow: inset .1rem .1rem .2rem hsl(120, 10%, 100%),
                    inset -.1rem -.1rem .2rem hsl(120, 10%, 60%);
        transition: all 300ms;
      }

      #answerBox div:hover {
        background-color: var(--buttons-highlight);
        box-shadow: inset .1rem .1rem .2rem hsl(120, 70%, 60%),
                    inset -.1rem -.1rem .2rem hsl(120, 70%, 100%);
        cursor: default;
      }

    </style>
  </head>
  <body>
    <div class="gridBox">
      <header>Verb Practice: To Be</header>
      <table class="gridItem">
        <tr>
          <th colspan="2">To Be</th>
        </tr>
        <tr>
          <td>I am</td>
          <td>We are</td>
        </tr>
        <tr>
          <td>You are</td>
          <td>You are</td>
        </tr>
        <tr>
          <td>He/She/It is</td>
          <td>They are</td>
        </tr>
      </table>
      <table class="gridItem">
        <tr>
          <th colspan="2">Estar/Ser</th>
        </tr>
        <tr>
          <td>Yo soy/estoy</td>
          <td>Nosotros somos/estamos</td>
        </tr>
        <tr>
          <td>Tú eres/estás</td>
          <td>Ustedes son/están</td>
        </tr>
        <tr>
          <td>Él/Ella/Ello es/está</td>
          <td>Ellos/Ellas son/están</td>
        </tr>
      </table>

      <button id="sentenceButton" type="button" onclick="getSentence()">Get Sentence</button>

      <section class="gridItem" id="displayWindow">

      </section>
      <section class="gridItem" id="responseWindow">

      </section>

    </div>
  </body>
  <script>

    let pronouns = {
      "I": "Am",
      "You": "Are",
      "He": "Is",
      "She": "Is",
      "It": "Is",
      "We": "Are",
      "They": "Are"
    };

    let phrases = [
      "in a hurry", "going to the store", "late for work",
      "going to the movies", "40 years old", "tired", "feeling angry", "feeling good",
      "a doctor", "a teacher", "a mechanic"
    ];

    let itPhrases = [
      "cold outside", "going to rain", "an apple", "a backpack", "hot out", "a beautiful day",
      "a long way home", "in the kitchen", "on the shelf", "dark outside", "a long class"
    ];

    let names = [
      "Robert", "Rachel", "Daniel", "Denise", "Michael", "Michelle", "Steven", "Sophia",
      "Chris", "Carrie", "Arthur", "Ashley", "Frank", "Florence", "Justin", "Jasmine",
      "Lucas", "Leslie", "Steven", "Sarah", "Thomas", "Tina"
    ]

    let pronoun = null;

    let options = `<div id="answerBox"><div onclick="checkAnswer('Am')">Am</div>
      <div onclick="checkAnswer('Are')">Are</div>
      <div onclick="checkAnswer('Is')">Is</div></div>`;

    const checkSpan = function(id) {
      //----------------------------------------------------//
      //Checks to see if a specified <span> is in the DOM   //
      //and removes it if it is                             //
      //string-> id: id of the <span> to be checked         //
      //----------------------------------------------------//

      let span = document.getElementById(id);
      if (span) {
        span.parentNode.removeChild(span);
      }
    }

    const getName = function(subject) {
      //----------------------------------------------------//
      //Switches out names for pronouns                     //
      //----------------------------------------------------//

      let index = null;

      switch (subject) {
        case "He":
        case "She":
          index = getRandomNumber(0, names.length - 1);
          return subject = names[index];
          break;
        case "We":
          index = getRandomNumber(0, names.length - 1);
          subject = names[index] + " and I";
          return subject;
          break;
        case "They":
          index = getRandomNumber(0, names.length - 1);
          let index2 = getRandomNumber(0, names.length - 1);
          while (index2 === index) {
            index2 = getRandomNumber(0, names.length - 1);
          }
          subject = names[index] + " and " + names[index2];
          return subject;
          break;
        default:
          return subject;
      }
    }

    const getSentence = function() {
      //----------------------------------------------------//
      //Randomly generates a sentence and puts it on        //
      //the screen                                          //
      //----------------------------------------------------//

      checkSpan("sentenceSpan");
      checkSpan("responseSpan");

      let pronounIndex = getRandomNumber(0, 6);
      pronoun = Object.keys(pronouns)[pronounIndex];
      let subject = pronoun;

      let sentenceButton = document.getElementById("sentenceButton");
        sentenceButton.onclick = null;
        sentenceButton.style.filter = "opacity(25%)";

      let phrase = null;
      let phraseIndex = null;
      if (pronounIndex != 4) {
        phraseIndex = getRandomNumber(0, phrases.length - 1);
        phrase = phrases[phraseIndex];
        if (phrases[phraseIndex][0] === "a") {
          if (pronounIndex >= 5) {
            phrase = phrases[phraseIndex].slice(2);
            phrase = phrase + "s";
          }
        }
      } else {
        phraseIndex = getRandomNumber(0, itPhrases.length - 1);
        phrase = itPhrases[phraseIndex];
      }

      if (getRandomNumber(0, 1)) {
        subject = getName(subject);
      }

      let sentence = `${subject} ${options} ${phrase}.`;
      let sentenceSpan = document.createElement("span");
      sentenceSpan.id = "sentenceSpan";
      sentenceSpan.innerHTML = sentence;

      let displayWindow = document.getElementById("displayWindow");
      displayWindow.appendChild(sentenceSpan);
    }

    const checkAnswer = function(verb) {
      //----------------------------------------------------//
      //Checks the answer to the problem                    //
      //----------------------------------------------------//

      checkSpan("responseSpan");

      let responseWindow = document.getElementById("responseWindow");
      let responseSpan = document.createElement("span");
        responseSpan.id = "responseSpan";

      let answers = document.getElementById("answerBox").childNodes;

      if (verb === pronouns[pronoun]) {
        responseSpan.classList.add("correct");
        responseSpan.textContent = "Good job!";

        for (let i = 0; i < answers.length; i++) {
          answers[i].onclick = null;
        }

        let sentenceButton = document.getElementById("sentenceButton");
          sentenceButton.onclick = getSentence;
          sentenceButton.style.filter = "opacity(100%)";
      } else {
        responseSpan.classList.add("wrong");
        responseSpan.textContent = "Not quite, try again.";

        for (let i = 0; i < answers.length; i++) {
          if (answers[i].innerHTML === verb) {
            answers[i].classList.add("wrong");
          }
        }
      }

      responseWindow.appendChild(responseSpan);
    }

    const getRandomNumber = function(floor, ceiling) {
      //----------------------------------------------------//
      //Gets random number for the math problems            //
      //where floor is the lowest number possible and       //
      //ceiling is the highest number possible              //
      //----------------------------------------------------//

      let range = (ceiling - floor) + 1;
      return Math.floor((Math.random() * range) + floor);
    }

  </script>
</html>
